datasource db {
  provider = "mysql"
  url      = env("MYSQL_URL")
}

generator client {
  provider = "prisma-client-js"
}

model OptionVote {
  id             String   @id @default(cuid())
  session_id     String
  session        Session  @relation(fields: [session_id], references: [id])
  voter_account  String
  voter_guard    String
  option         BigInt
  refunded       Boolean  @default(false)
  redeemed_prize Boolean  @default(false)
  slashed        Boolean  @default(false)
  voted_at       DateTime @default(now())
}

model ResultVote {
  id            String   @id @default(cuid())
  session_id    String
  session       Session  @relation(fields: [session_id], references: [id])
  voter_account String
  right         Boolean
  voted_at      DateTime @default(now())
}

model Session {
  id                 String       @unique
  name               String       @unique
  description        String
  expiration         DateTime     @default(now())
  options            Json
  fee                Float
  creator_account    String
  correct            BigInt       @default(-1)
  result_voted       Boolean      @default(false)
  invalidated        Boolean      @default(false)
  creator_slashed    Boolean      @default(false)
  total_winners      BigInt       @default(0)
  result_released_at DateTime     @default(now())
  created_at         DateTime     @default(now())
  votes              OptionVote[]
  result_votes       ResultVote[]
}
