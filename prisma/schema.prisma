datasource db {
  provider = "mysql"
  url      = env("MYSQL_URL")
}

generator client {
  provider = "prisma-client-js"
}

model OptionVote {
  id             String   @id @default(cuid())
  session_id     String
  session        Session  @relation(fields: [session_id], references: [id])
  voter_account  String   @unique
  voter_guard    String
  option         BigInt
  refunded       Int
  redeemed_prize Int
  slashed        Int
  voted_at       DateTime @default(now())
}

model Session {
  id                 String       @unique
  name               String       @unique
  description        String
  expiration         DateTime     @default(now())
  options            Json
  fee                Float
  creator_account    String
  correct            BigInt       @default(-1)
  result_voted       Int          @default(0)
  invalidated        Int          @default(0)
  creator_slashed    Int          @default(0)
  total_winners      BigInt       @default(0)
  result_released_at DateTime     @default(now())
  created_at         DateTime     @default(now())
  votes              OptionVote[]
}
